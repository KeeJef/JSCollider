<!DOCTYPE html>

<script>

    var context;
    var rad = 10
    var distsep = 12
    var edgeupper = 300 - rad // dont spawn the object outside of the screen
    var edgelower = 0 + rad

    ballarray = []

    function Ball(xpos, ypos, movementx, movementy, radius) {

        this.xpos = xpos;
        this.ypos = ypos;
        this.movementx = movementx;
        this.movementy = movementy;
        this.radius = radius
    }
    
    function init(){

      context= myCanvas.getContext('2d');
      setInterval(draw,40); // dont call draw

        for (let index = 0; index < 10; index++) {
             //create ball objects
            let randomx = Math.floor(Math.random()*(edgeupper-edgelower+1)+edgelower)
            let randomy = Math.floor(Math.random()*(edgeupper-edgelower+1)+edgelower)

            var ball = new Ball(xpos = randomx, ypos = randomy, movementx = 5, movementy = 5, rad)

            if (index >=1) {

              for (let index = 0; index < ballarray.length; index++) {
                
                while (Math.abs(ball.xpos - ballarray[index].xpos) <= distsep) {
                  
                  let randomx = Math.floor(Math.random()*(edgeupper-edgelower+1)+edgelower)
                  

                  ball.xpos = randomx
                }

                while (Math.abs(ball.ypos - ballarray[index].ypos) <= distsep) {
                  
                  let randomy = Math.floor(Math.random()*(edgeupper-edgelower+1)+edgelower)

                  ball.ypos = randomy
                }
                
              }
              
            }

            ballarray.push(ball)

            
        }

        
    }
    
    function draw()
    {

    //just need to draw the whole array and evaluate functions for positions of each object
    context.clearRect(0,0, 300,300);

    for (let index = 0; index < ballarray.length; index++) {

      context.beginPath();
      context.fillStyle="#0000ff";
      context.arc(ballarray[index].xpos,ballarray[index].ypos,ballarray[index].radius,0,Math.PI*2,true); 
      context.closePath();
      context.fill();

      if( (ballarray[index].xpos-rad)<0 || (ballarray[index].xpos+rad)>300) ballarray[index].movementx=-ballarray[index].movementx; 
      if( (ballarray[index].ypos-rad)<0 || (ballarray[index].ypos+rad)>300) ballarray[index].movementy=-ballarray[index].movementy;
      ballarray[index].xpos+=ballarray[index].movementx; 
      ballarray[index].ypos+=ballarray[index].movementy; 
    }

    }
    
    </script>
    <body onLoad="init();">
      <canvas id="myCanvas" width="300" height="300" style="border:1px solid #000000;">
      </canvas>
    </body>